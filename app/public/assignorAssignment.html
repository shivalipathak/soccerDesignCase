<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>ISRA</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.2.1.js">
    </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <script src="https://unpkg.com/vue@next"></script>
  </head>

<body>
	<div class="container-fluid">
		<header>
			<nav class="row navbar navbar-default">
				<div class="navbar-header">
					<button class="navbar-toggle" data-toggle="collapse" data-target="#mymenu">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              </button>
          </div>
          <div class="collapse navbar-collapse" id="mymenu">
           <ul class= "nav navbar-nav">
            <li><a id="homelink"href="index.html">Home</a></li>
            <li><a id="homelink"href="user.html">View referees</a></li>  
           </ul>
           <ul class="nav navbar-nav navbar-right">
            <li><a href="assignorHome.html">Assignor Access</a></li>
            <li><a href="refhome.html">Referee Access</a></li> 
            <li>
              <a id="loginApp" href="signin.html"><button class="btn btn-info" id="sign-in-button" v-on:click="signIn">Sign in</button></a>
              </li>
            </ul>
          </div>
        </nav>
    </header>
    <main class="row">
      <div class="page">
        <div id = "assignApp">
            <table id="refereeTable" class="table table-hover">
            <thead>
                <tr>
                    <th scope="col" class="table-header">Game ID</th>
                    <th scope="col" class="table-header">Referee ID</th>
                    <th scope="col" class="table-header">Field</th>
                    <th scope="col" class="table-header">Date</th>
                    <th scope="col" class="table-header">Time</th>
                </tr>
            </thead>

            <tbody v-for="g in games" v-on:click.prevent="selectGame(g)" :class="['Game', {selected: selectedGame && g.id == selectedGame.id}]">
                <tr>
                    <th scope="row">{{ g.gameId }}</th>
                    <td>{{ g.refereeId }}</td>
                    <td>{{ g.field }}</td>
                    <td>{{ g.date }}</td>
                    <td>{{ g.time }}</td>
                </tr>
            </tbody>
          </table>
          <div class="row" v-if="selectedGame">
              <h3>Referees for Game {{selectedGame.gameId}}</h3>
              <table id="refereeTable" class="table table-hover">
                <thead id="table_head">
                    <tr>
                        <th>Name</th>
                        <th>Grade</th>
                        <th>Skill</th>
                        <th>Position</th>
                        <th>Status</th>
                        <th></th>
                    </tr>
                </thead>
                
                <tbody>
                  <tr v-for="assignment in assignments">
                    <td>{{ assignment.rName }}</td> 
                    <td>{{ assignment.rGrade }}</td>
                    <td>{{ assignment.rSkill }}</td> 
                    <td>{{ assignment.rPosition }}</td>
                    <td>{{ assignment.gameStatus }}</td>
                    <td>
                      <button type="button" v-on:click="handleEditAssignment(assignment)" class="btn btn-outline-secondary btn-sm">Edit</button>
                      <button type="button" v-on:click="postDeleteAssignment(assignment)" class="btn btn-outline-secondary btn-sm">Delete</button>
                    </td>
                  </tr>
        
              </tbody>
            </table>
            
          
          <h3>{{ selectedAssignment === null ? "Add " : "Edit " }} Assignment</h3>
            <form v-on:submit.prevent="postAssignment">
              <div class="mb-3">
                <label for="refereeId" class="form-label">Select a referee:</label>
                <select v-model ="assignment_form.refereeId" required="required">           
                  <option v-for = "a in assignments" :value = "a.refereeId">{{a.refereeId}}</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="rPosition" class="form-label">Select a position:</label>
                <select v-model ="assignment_form.rPosition" required="required">
                  <option> Head</option>
                  <option> Assistant</option>
                  <option> Fourth Official</option>
                </select> 
              </div>
              <div class="mb-3">
                <label for="gameStatus" class="form-label">Select a status:</label>
                <select v-model ="gameStatus" required="required">
                  <option> Unassigned</option>
                  <option> Assigned</option>
                  <option> Tentative</option>
                  <option> Accepted</option>
                </select> 
              </div>
              <button type="submit" class="btn btn-light">{{ selectedAssignment === null ? "Add " : "Edit " }} Assignment</button>
              <button type="button" class="btn btn-outline-secondary" 
                   v-if="selectedAssignment"
                   v-on:click="handleResetEditAssignment">Cancel Edit</button>
           </form>

            </div>
          </div>
        
          
        </div>
        </div>
    </main>
    
    </div>
  </body>
    <script src="js/assignment.js"></script>
    
  </body>
</html>